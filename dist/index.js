"use strict";var PINYIN_TABLE=require("./dictionary/pinyin.dict");var PHRASE_PINYIN_TABLE=require("./dictionary/phrase_pinyin.dict");var chineseDict=require("./dictionary/traditional_chinese.dict");var CHINESE_REGEX=/[\u4e00-\u9fa5]/;var CHINESE_REGEX_GLOBAL=/[\u4e00-\u9fa5]/g;var ToPinyin={chineseToPinyin:function(i){var t=this;if(typeof i!=="string")throw new TypeError("参数必须为String类型");if(!CHINESE_REGEX.test(i))return i;var n=this.traditionalToSimplified(i);var r=[];var e=0;var E=n.length;while(e<E){var o=n.substring(e);if(!CHINESE_REGEX.test(o[0])){r.push(o[0]);e++;continue}var u=this._multiPinyin(o);if(!u){r.push(o[0]);e++;continue}r.push(u);e=e+u.length}r.forEach(function(i,n,r){if(i.length>1){r[n]=PHRASE_PINYIN_TABLE[i]}else if(CHINESE_REGEX.test(i)){r[n]=t._toSimplifiedPinyin(i)}});return r.join("")},traditionalToSimplified:function(n){if(typeof n!=="string")throw new TypeError("参数必须为String类型");if(!CHINESE_REGEX.test(n))return n;var i=n.match(CHINESE_REGEX_GLOBAL);i=i.filter(function(i){if(chineseDict[i]){return i}});!!i.length&&i.forEach(function(i){n=n.replace(i,chineseDict[i])});return n},_multiPinyin:function(i){var n="";for(var r=2;r<5;r++){var t=PHRASE_PINYIN_TABLE[i.substring(0,r)];if(typeof t!="undefined"){n=i.substring(0,r)}}return n},_toSimplifiedPinyin:function(i){if(!PINYIN_TABLE[i])return"("+i+"我的字典中无记录"+")";return PINYIN_TABLE[i][0]}};module.exports=ToPinyin;