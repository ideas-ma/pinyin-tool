"use strict";var _createClass=function(){function r(i,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(i,r.key,r)}}return function(i,n,e){if(n)r(i.prototype,n);if(e)r(i,e);return i}}();function _classCallCheck(i,n){if(!(i instanceof n)){throw new TypeError("Cannot call a class as a function")}}var PINYIN_TABLE=require("./dictionary/pinyin.dict");var PHRASE_PINYIN_TABLE=require("./dictionary/phrase_pinyin.dict");var chineseDict=require("./dictionary/traditional_chinese.dict");var CHINESE_REGEX=/[\u4e00-\u9fa5]/;var CHINESE_REGEX_GLOBAL=/[\u4e00-\u9fa5]/g;var ToPinyin=function(){function i(){_classCallCheck(this,i)}_createClass(i,null,[{key:"chineseToPinyin",value:function i(n){var r=this;if(typeof n!=="string")throw new TypeError("参数必须为String类型");if(!CHINESE_REGEX.test(n))return n;var e=this._traditionalToSimplified(n);var t=[];var a=0;var u=e.length;while(a<u){var o=e.substring(a);if(!CHINESE_REGEX.test(o[0])){t.push(o[0]);a++;continue}var c=this._multiPinyin(o);if(!c){t.push(o[0]);a++;continue}t.push(c);a=a+c.length}t.forEach(function(i,n,e){if(i.length>1){e[n]=PHRASE_PINYIN_TABLE[i]}else if(CHINESE_REGEX.test(i)){e[n]=r._toSimplifiedPinyin(i)}});return t.join("")}},{key:"_traditionalToSimplified",value:function i(n){var e=n.match(CHINESE_REGEX_GLOBAL);e=e.filter(function(i){if(chineseDict[i]){return i}});!!e.length&&e.forEach(function(i){n=n.replace(i,chineseDict[i])});return n}},{key:"_multiPinyin",value:function i(n){var e="";for(var r=2;r<5;r++){var t=PHRASE_PINYIN_TABLE[n.substring(0,r)];if(typeof t!="undefined"){e=n.substring(0,r)}}return e}},{key:"_toSimplifiedPinyin",value:function i(n){if(!PINYIN_TABLE[n])return"("+n+"我的字典中无记录"+")";return PINYIN_TABLE[n][0]}}]);return i}();module.exports=ToPinyin;